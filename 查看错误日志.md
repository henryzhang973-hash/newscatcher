# 如何查看 GitHub Actions 错误日志

## 📍 查看详细错误信息

当 workflow 失败时（退出码 1），按以下步骤查看详细错误：

### 步骤 1: 进入 Actions 页面

1. 访问你的仓库：https://github.com/henryzhang973-hash/newscatcher
2. 点击顶部的 **Actions** 标签

### 步骤 2: 查看失败的运行

1. 在左侧找到 "News Summarizer" workflow
2. 点击最新的运行记录（红色 ❌ 标记）

### 步骤 3: 查看详细日志

展开各个步骤，重点关注：

#### 1. "Verify configuration" 步骤

查看：
- ✅ 配置文件是否存在
- ✅ Secrets 是否已配置
- ⚠️ 哪些配置缺失

#### 2. "Run news summarizer" 步骤

查看完整的输出，寻找：
- ❌ 错误信息
- ⚠️ 警告信息
- 📊 执行进度

### 步骤 4: 常见错误位置

**错误通常在以下位置：**

1. **配置加载阶段**
   ```
   [1/4] 加载配置...
   ❌ 错误: 未配置 AI_API_KEY
   ```

2. **数据抓取阶段**
   ```
   [2/4] 抓取各平台热点新闻...
   ✗ 抓取失败: ...
   ```

3. **AI 总结阶段**
   ```
   [3/4] 使用 AI 生成总结...
   ✗ AI 总结失败: ...
   ```

4. **飞书推送阶段**
   ```
   [4/4] 推送到飞书...
   ✗ 飞书推送失败: ...
   ```

## 🔍 诊断步骤

### 如果看到 "配置文件不存在"

**检查：**
- `config.yaml` 是否在仓库根目录
- 文件是否已提交到 Git

**解决：**
```bash
cd /Users/henryzhang/TrendRadar/newscatcher
git add config.yaml
git commit -m "Add config.yaml"
git push origin main
```

### 如果看到 "未配置 AI_API_KEY"

**检查：**
- GitHub Secrets 中是否有 `AI_API_KEY`
- Secret 名称是否正确（区分大小写）

**解决：**
1. Settings → Secrets and variables → Actions
2. 检查 `AI_API_KEY` 是否存在
3. 如果不存在，点击 "New repository secret" 添加

### 如果看到 "AI 总结失败"

**可能原因：**
- API Key 无效
- API 地址错误
- 模型名称错误
- 网络问题

**检查：**
- `AI_API_KEY` 是否正确
- `AI_BASE_URL` 是否正确（DeepSeek: `https://api.deepseek.com`）
- `AI_MODEL` 是否正确（DeepSeek: `deepseek-chat`）

### 如果看到 "飞书推送失败"

**检查：**
- `FEISHU_WEBHOOK_URL` 是否正确
- 飞书机器人是否已启用

**注意：** 飞书推送失败不会导致程序失败，但会在日志中显示警告。

## 📋 完整日志示例

成功的运行应该看到：

```
================================================================================
热点新闻总结程序
================================================================================
当前工作目录: /home/runner/work/newscatcher/newscatcher
Python 版本: 3.10.x

[1/4] 加载配置...
  ✓ 配置加载成功
  - 监控平台: 11 个
  ...

[2/4] 抓取各平台热点新闻...
  ✓ 抓取完成: 11 个平台，共 110 条新闻

[3/4] 使用 AI 生成总结...
  ✓ AI 总结生成成功

[4/4] 推送到飞书...
  ✓ 飞书所有批次发送完成

✅ 程序执行完成！
```

## 💡 提示

- 复制完整的错误信息，这样更容易诊断
- 检查每个步骤的输出，不要只看最后一行
- 如果某个步骤失败，查看该步骤的完整输出

